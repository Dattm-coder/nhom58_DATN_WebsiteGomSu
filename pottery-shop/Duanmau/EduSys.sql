CREATE DATABASE EduSys
GO
USE EduSys
GO
CREATE TABLE NhanVien
(
	MaNV NVARCHAR(50) NOT NULL,
	MatKhau NVARCHAR(50) NOT NULL,
	HoTen NVARCHAR(50) NOT NULL,
	VaiTro BIT NOT NULL,
	PRIMARY KEY(MaNV)
)
GO
CREATE TABLE ChuyenDe
(
	MaCD NCHAR(5) NOT NULL,
	TenCD NVARCHAR(50) NOT NULL,
	HocPhi FLOAT NOT NULL,
	ThoiLuong INT NOT NULL,
	Hinh NVARCHAR(50) NOT NULL,
	MoTa NVARCHAR(255) NOT NULL,
	PRIMARY KEY(MaCD)
)
GO
CREATE TABLE KhoaHoc
(
	MaKH INT IDENTITY(1,1) NOT NULL,
	MaCD NCHAR(5) NOT NULL,
	HocPhi FLOAT NOT NULL,
	ThoiLuong INT NOT NULL,
	NgayKG DATE NOT NULL,
	GhiChu NVARCHAR(50) NULL,
	MaNV NVARCHAR(50) NOT NULL,
	NgayTao DATE NOT NULL,
	PRIMARY KEY(MaKH),
	FOREIGN KEY(MaCD) REFERENCES dbo.ChuyenDe(MaCD) ON DELETE NO ACTION ON UPDATE CASCADE,
	FOREIGN KEY(MaNV) REFERENCES dbo.NhanVien(MaNV) ON DELETE NO ACTION ON UPDATE CASCADE
)
GO
CREATE TABLE NguoiHoc
(
	MaNH NCHAR(7) NOT NULL,
	HoTen NVARCHAR(50) NOT NULL,
	NgaySinh DATE NOT NULL,
	GioiTinh BIT NOT NULL,
	DienThoai NVARCHAR(50) NOT NULL,
	Email NVARCHAR(50) NOT NULL,
	GhiChu NVARCHAR(MAX) NULL,
	MaNV NVARCHAR(50) NOT NULL,
	NgayDK DATE NOT NULL,
	PRIMARY KEY(MaNH),
	FOREIGN KEY(MaNV) REFERENCES dbo.NhanVien(MaNV) ON DELETE NO ACTION ON UPDATE CASCADE
)
GO
CREATE TABLE HocVien
(
	MaHV INT IDENTITY(1,1) NOT NULL,
	MaKH INT NOT NULL,
	MaNH NCHAR(7) NOT NULL,
	Diem FLOAT NOT NULL,
	PRIMARY KEY(MaHV),
	FOREIGN KEY(MaNH) REFERENCES dbo.NguoiHoc(MaNH) ON DELETE NO ACTION ON UPDATE CASCADE,
	FOREIGN KEY(MaKH) REFERENCES dbo.KhoaHoc(MaKH) ON DELETE NO ACTION  ON UPDATE NO ACTION
)

DELETE FROM dbo.NhanVien
INSERT INTO dbo.NhanVien VALUES  ( N'NV001',N'001',N'Trần Đình Thiện',1)
INSERT INTO dbo.NhanVien VALUES  ( N'NV002',N'002',N'Nguyễn Văn A',1)
INSERT INTO dbo.NhanVien VALUES  ( N'NV003',N'003',N'Trần Thị B',0)
INSERT INTO dbo.NhanVien VALUES  ( N'NV004',N'004',N'Nguyễn Văn C',0)

DELETE FROM dbo.ChuyenDe
INSERT INTO dbo.ChuyenDe VALUES  ( N'CD001' ,N'Chuyên đề 1' ,300.0 ,20 ,N'anh1.png' ,N'...')
INSERT INTO dbo.ChuyenDe VALUES  ( N'CD002' ,N'Chuyên đề 2' ,100.0 ,50 ,N'anh2.png' ,N'...')
INSERT INTO dbo.ChuyenDe VALUES  ( N'CD003' ,N'Chuyên đề 3' ,200.0 ,10 ,N'anh3.png' ,N'...')
INSERT INTO dbo.ChuyenDe VALUES  ( N'CD004' ,N'Chuyên đề 4' ,400.0 ,30 ,N'anh4.png' ,N'...')

DELETE FROM dbo.KhoaHoc
INSERT INTO dbo.KhoaHoc VALUES  ( N'CD002' ,100.0 ,50 ,GETDATE() ,N'...' ,N'NV003' ,GETDATE())
INSERT INTO dbo.KhoaHoc VALUES  ( N'CD004' ,400.0 ,30 ,GETDATE() ,N'...' ,N'NV002' ,GETDATE())
INSERT INTO dbo.KhoaHoc VALUES  ( N'CD003' ,300.0 ,10 ,GETDATE() ,N'...' ,N'NV004' ,GETDATE())
INSERT INTO dbo.KhoaHoc VALUES  ( N'CD001' ,600.0 ,70 ,GETDATE() ,N'...' ,N'NV001' ,GETDATE())

DELETE FROM dbo.NguoiHoc
INSERT INTO dbo.NguoiHoc VALUES  ( N'NH001' ,N'Trần Văn A' ,GETDATE() ,1 ,N'0969753187' ,N'a0969@gmail.com' ,N'...' ,N'NV003' ,GETDATE() )
INSERT INTO dbo.NguoiHoc VALUES  ( N'NH002' ,N'Trần Văn B' ,GETDATE() ,0 ,N'0334562133' ,N'b0969@gmail.com' ,N'...' ,N'NV001' ,GETDATE() )
INSERT INTO dbo.NguoiHoc VALUES  ( N'NH003' ,N'Trần Văn C' ,GETDATE() ,1 ,N'0955324678' ,N'c0969@gmail.com' ,N'...' ,N'NV004' ,GETDATE() )
INSERT INTO dbo.NguoiHoc VALUES  ( N'NH004' ,N'Trần Văn D' ,GETDATE() ,0 ,N'0312445635' ,N'd0969@gmail.com' ,N'...' ,N'NV002' ,GETDATE() )

DELETE FROM dbo.HocVien
INSERT INTO dbo.HocVien VALUES  ( 3,N'NH001',6.5)
INSERT INTO dbo.HocVien VALUES  ( 2,N'NH004',7.5)
INSERT INTO dbo.HocVien VALUES  ( 4,N'NH003',9.0)
